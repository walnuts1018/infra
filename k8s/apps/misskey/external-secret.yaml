apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: misskey-257bfe
spec:
  data:
    - remoteRef:
        key: misskey
        property: dbpassword
      secretKey: dbPassword
    - remoteRef:
        key: redis
        property: password
      secretKey: redisPassword
  refreshInterval: 1m
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: misskey-257bfe
    template:
      data:
        dbPassword: '{{ .dbPassword }}'
        redisPassword: '{{ .redisPassword }}'
      engineVersion: v2
      templateFrom:
        - configMap:
            items:
              - key: default.yml
                templateAs: Values
            name: misskey
          target: Data
      type: Opaque

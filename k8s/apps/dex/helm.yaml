# Default values for dex.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas (pods) to launch.
replicaCount: 1

# -- Application configuration.
# See the [official documentation](https://dexidp.io/docs/).
config:
 issuer: https://auth.walnuts.ml:5556
    storage:
      type: kubernetes
      config:
        inCluster: true
    web:
      https: 0.0.0.0:5556
      tlsCert: /etc/dex/tls/tls.crt
      tlsKey: /etc/dex/tls/tls.key
    connectors:
    - type: github
      id: github
      name: GitHub
      config:
        clientID: $GITHUB_CLIENT_ID
        clientSecret: $GITHUB_CLIENT_SECRET
        redirectURI: https://auth.walnuts.ml:5556/callback
        org: kubernetes
    oauth2:
      skipApprovalScreen: true
    
    staticClients:
    - id: example-app
      redirectURIs:
      - 'http://longhorn.walnuts.ml/oauth2/callback'
      name: 'oauth-proxy'
      secret: proxy
    enablePasswordDB: true
    staticPasswords:
    - email: "admin@example.com"
      # bcrypt hash of the string "password": $(echo password | htpasswd -BinC 10 admin | cut -d: -f2)
      hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
      username: "admin"
      userID: "08a8684b-db88-4b73-90a9-3cd1661f5466"


service:
  # -- Annotations to be added to the service.
  annotations: {}

  # -- Kubernetes [service type](https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types).
  type: ClusterIP

  # -- Internal cluster service IP (when applicable)
  clusterIP: ""

  ports:
    http:
      # -- HTTP service port
      port: 5556

      # -- (int) HTTP node port (when applicable)
      nodePort:

    https:
      # -- HTTPS service port
      port: 5554

      # -- (int) HTTPS node port (when applicable)
      nodePort:

    grpc:
      # -- gRPC service port
      port: 5557

      # -- (int) gRPC node port (when applicable)
      nodePort:

ingress:
  # -- Enable [ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/).
  enabled: true

  # -- Ingress [class name](https://kubernetes.io/docs/concepts/services-networking/ingress/#ingress-class).
  className: "nginx"

  # -- Annotations to be added to the ingress.
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"

  # -- Ingress host configuration.
  # @default -- See [values.yaml](values.yaml).
  hosts:
    - host: cauth.walnuts.ml
      paths:
        - path: /
          pathType: ImplementationSpecific

serviceMonitor:
  # -- Enable Prometheus ServiceMonitor.
  # See the [documentation](https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/design.md#servicemonitor) and the [API reference](https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitor) for details.
  enabled: false

  # -- Namespace where the ServiceMonitor resource should be deployed.
  # @default -- Release namespace.
  namespace: ""

  # -- (duration) Prometheus scrape interval.
  interval:

  # -- (duration) Prometheus scrape timeout.
  scrapeTimeout:

  # -- Labels to be added to the ServiceMonitor.
  labels: {}
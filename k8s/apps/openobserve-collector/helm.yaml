apiVersion: source.toolkit.fluxcd.io/v1
kind: HelmRepository
metadata:
  name: openobserve-collector
spec:
  url: https://charts.openobserve.ai
---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: openobserve-collector
spec:
  chart:
    spec:
      chart: openobserve-collector
      version: 0.3.7
  valuesFrom:
  - kind: Secret
    name: openobserve-collector
    valuesKey: authorization
    targetPath: "exporters.otlphttp/openobserve.headers.Authorization"
  - kind: Secret
    name: openobserve-collector
    valuesKey: authorization
    targetPath: "exporters.otlphttp/openobserve_k8s_events.headers.Authorization"
  values:
    exporters:
      otlphttp/openobserve:
        endpoint: https://openobserve.walnuts.dev/api/default/
        headers: {}
      otlphttp/openobserve_k8s_events:
        endpoint: https://openobserve.walnuts.dev/api/default/
        headers:
          stream-name: k8s_events

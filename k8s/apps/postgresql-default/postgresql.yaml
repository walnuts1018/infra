apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: default
spec:
  teamId: "default"
  volume:
    size: 20Gi
    storageClass: longhorn
  numberOfInstances: 2
  users:
    postgres:
    - superuser
    - createdb
    juglans: []
    fitbit_manager: []
    grafana: []
    hedgedoc: []
    misskey: []
    nextcloud: []
    oekaki_dengon_game: []
    openchokin: []
    wakatime: []
    zitadel: []
  databases:
    # dbname: owner
    juglans: juglans
    fitbit_manager: fitbit_manager
    grafana: grafana
    hedgedoc: hedgedoc
    misskey: misskey
    nextcloud: nextcloud
    oekaki_dengon_game: oekaki_dengon_game
    openchokin: openchokin
    wakatime_to_slack: wakatime
    zitadel: zitadel
  postgresql:
    version: "15"
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  patroni:
    pg_hba:
    - host all all 10.244.0.0/16 md5

apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
    labels:
        app: photoprism
        app.kubernetes.io/name: photoprism
    name: photoprism-147a04
    namespace: photoprism
spec:
    data:
        - remoteRef:
            key: photoprism
            property: admin-password
          secretKey: adminpassword
        - remoteRef:
            key: photoprism
            property: mariadb-photoprism-password
          secretKey: dbpassword
    refreshInterval: 1m
    secretStoreRef:
        kind: ClusterSecretStore
        name: onepassword
    target:
        name: photoprism-147a04
        template:
            data:
                PHOTOPRISM_ADMIN_PASSWORD: '{{ .adminpassword }}'
                PHOTOPRISM_DATABASE_DSN: photoprism:{{ .dbpassword }}@tcp(photoprism-mariadb.photoprism.svc.cluster.local:3306)/photoprism?charset=utf8mb4,utf8&parseTime=true
            engineVersion: v2
            type: Opaque

---

apiVersion: cs.walnuts.dev/v1alpha2
kind: CodeServerDeployment
metadata:
    labels:
        app.kubernetes.io/name: codebox
    name: code-server-knative
spec:
    replicas: 1
    template:
        spec:
            domain: walnuts.dev
            envs:
                - name: LANGUAGE_DEFAULT
                  value: ja
            image: ghcr.io/kmc-jp/code-server-images-golang:f66bb947f1dbfe0c07c8323ef45ebd32af0a72f4-54
            imagePullSecrets:
                - name: ghcr-login-secret
            ingressClassName: nginx
            initPlugins:
                copyDefaultConfig: {}
                copyHome: {}
                git:
                    branch: master
                    repourl: github.com/walnuts1018/knative
            nodeSelector:
                kubernetes.io/arch: amd64
            resources:
                limits:
                    memory: 4Gi
                requests:
                    memory: 512Mi
            storageClassName: local-path
            storageSize: 3Gi

---
